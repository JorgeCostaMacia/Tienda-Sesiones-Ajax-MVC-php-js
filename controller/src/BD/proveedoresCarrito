CREATE TABLE usuarios (
    nomUsser CHAR(30) NOT NULL,
    passUsser CHAR(30) DEFAULT 'defaultpass',
    CONSTRAINT PK_USUARIO PRIMARY KEY (nomUsser)
)ENGINE=InnoDB;

CREATE TABLE piezas (
	refPieza VARCHAR(15) NOT NULL,
    nomPieza CHAR(30) DEFAULT 'undefined',
    precioVent INTEGER DEFAULT'1',
    ruta_imagen VARCHAR(80) DEFAULT'controller/src/img/porDefecto.png',
    CONSTRAINT PK_PIEZA PRIMARY KEY(refPieza)
)ENGINE=InnoDB;

CREATE TABLE pedidos (
    numPedido SMALLINT NOT NULL AUTO_INCREMENT,
    nomUsser CHAR(30) NOT NULL,
	fecha DATETIME,

    CONSTRAINT PK_PEDIDO PRIMARY KEY (numPedido),
    CONSTRAINT FK_PEDIDOS_USUARIOS FOREIGN KEY (nomUsser) REFERENCES usuarios(nomUsser) ON DELETE NO ACTION ON UPDATE CASCADE
)ENGINE=InnoDB;

CREATE TABLE linped (
    numLinea SMALLINT NOT NULL,
    numPedido SMALLINT NOT NULL,
    refPieza VARCHAR(15) NOT NULL,
    precioCompra INTEGER,
    cantidad SMALLINT,

    CONSTRAINT PK_LINPED PRIMARY KEY (numPedido, numLinea),
    CONSTRAINT FK_LINPED_PEDIDOS FOREIGN KEY (numPedido) REFERENCES pedidos(numPedido) ON DELETE CASCADE ON UPDATE CASCADE,
	 CONSTRAINT FK_LINPED_PIEZAS FOREIGN KEY (refPieza) REFERENCES piezas(refPieza) ON DELETE NO ACTION ON UPDATE CASCADE
)ENGINE=InnoDB;

CREATE TABLE carrito (
	nomUsser CHAR(30) NOT NULL,
    refPieza VARCHAR(15) NOT NULL,
    cantidad SMALLINT,

    CONSTRAINT PK_CARRITO PRIMARY KEY (nomUsser, refPieza),
    CONSTRAINT FK_CARRITO_USUARIO FOREIGN KEY (nomUsser) REFERENCES usuarios(nomUsser) ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT FK_CARRITO_PIEZAS FOREIGN KEY (refPieza) REFERENCES piezas(refPieza) ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE=InnoDB;

INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('A-1001-L', 'RATON NEGRO 3BOTONES', 300);
INSERT INTO PIEZAS (refPieza, PRECIOVENT) VALUES ('C-1002-H', 400);
INSERT INTO PIEZAS (refPieza, PRECIOVENT) VALUES ('C-1002-J', 700);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('C-400-Z', 'FILTRO PANTALLA 17', 1800);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('DD-0001-210', 'DISCO DURO 20 Gb WD', 25000);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('DD-0001-30', 'DISCO DURO 20 Gb SEAGATE', 20000);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('DK144-0002-P', 'CAJA DISCOS 1.44Mb', 1100);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('DK720-0002-P', 'CAJA DISCOS 720Mb', 1500);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('FD-0001-144', 'UNIDAD DISCO 1.44 SAMSUNG', 15000);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('FD-0002-720', 'UNIDAD DISCO 720 SAMSUNG', 17000);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('M-0001-C', 'MONITOR LG 17P', 30000);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('M-0003-C', 'MONITOR SONY 17P', 45000);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('O-0001-PP', 'PEGATINAS ESPECIALES FD 1.44', 400);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('O-0002-PP', 'PEGATINAS ESPECIALES FD 720', 450);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('P-0001-33', 'PLACA BASE SOLTEK 33Mhz', 25000);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('P-0002-533', 'PLACA BASE INTEL', 75000);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('T-0001-AT', 'TECLADO COMPATIBLE AT', 1000);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('T-0001-IBM', 'TECLADO COMPATIBLE IBM', 1500);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('T-0002-AT', 'TECLADO COMPATIBLE AT2', 1045);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('2', 'Teclado ErgonOmico', 15000);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('3', 'Teclado ps/2', 2570);
INSERT INTO PIEZAS (refPieza, NOMPIEZA, PRECIOVENT) VALUES ('4', 'RatOn ps/2', 1500);